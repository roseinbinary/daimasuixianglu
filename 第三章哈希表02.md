## 🧩 LeetCode 刷题日记  
**日期：** 2025/10/14  
**主题：** 哈希表 02｜计数 · 多数求和 · 去重组合  
**题目：**  
- [454. 4Sum II（哈希映射 · 两数组求和配对）](https://leetcode.com/problems/4sum-ii/)  
- [383. Ransom Note（哈希计数 · 字符匹配）](https://leetcode.com/problems/ransom-note/)  
- [15. 3Sum（三指针 + 哈希去重）](https://leetcode.com/problems/3sum/)  
- [18. 4Sum（排序 + 双指针 + 哈希去重）](https://leetcode.com/problems/4sum/)  

**今日状态：**  
延续前一日的哈希思维，这几题进一步加深了对“哈希如何加速组合枚举”的理解。

---

### 🧠 解题思路总结

#### 454. 4Sum II（哈希映射 · 两数组求和配对）
- **核心思路：**  
  将四数组求和问题分解为两组：  
  `(A[i] + B[j]) + (C[k] + D[l]) = 0`。  
  先统计所有 `A[i] + B[j]` 的出现次数，用 HashMap 记录；  
  然后遍历 `C[k] + D[l]`，检查是否存在 `-(C[k] + D[l])`。  
- **实现关键：**  
  - HashMap 的 value 存储频次，而不是索引。  
  - 结果通过频次累加而非单次匹配。  
- **复杂度：** O(n²) 时间 + O(n²) 空间，但比暴力 O(n⁴) 高效得多。  

---

#### 383. Ransom Note（哈希计数 · 字符匹配）
- **思路核心：**  
  检查 ransomNote 是否能由 magazine 组成。  
  使用 HashMap 或数组统计 magazine 中字符出现次数，再逐一扣除 ransomNote 中字符。  
- **注意事项：**  
  - 如果任何字符频次不足则返回 false。  
  - 字母范围固定（a-z）时可直接用数组代替 HashMap。  

---

#### 15. 3Sum（三指针 + 哈希去重）
- **核心思路：**  
  1. 先排序数组。  
  2. 固定一个数 `nums[i]`，再用双指针在右侧区间寻找两数之和为 `-nums[i]` 的组合。  
  3. 遇到重复元素需跳过以防止重复解。  
- **关键点：**  
  - 排序是为去重和双指针前进提供条件。  
  - `left < right` 双指针动态收缩窗口。  
  - 通过 `while left < right and nums[left] == nums[left - 1]: left += 1` 实现去重。  

---

#### 18. 4Sum（排序 + 双指针 + 哈希去重）
- **核心思路：**  
  是 3Sum 的扩展：多一层外循环固定第二个数。  
  通过两层固定 + 双指针枚举后两位。  
- **技巧总结：**
  - 同样需要排序 + 去重逻辑。  
  - 当目标和很大时应注意整数溢出（Python 不会溢出，但 Java 需留意）。  
  - 时间复杂度 O(n³)，但借助排序与剪枝可大幅减少搜索。  

---

### ⚡ 易错点 / 卡壳点
- 454 题：HashMap 的 key 应是“和”，value 是“出现次数”；若存索引会错误。  
- 15 / 18 题：去重逻辑容易遗漏（外层和内层都需判断）。  
- 383 题：字符统计需注意每次扣减后不能小于 0。  

---

### ✅ 改进方案
- 练习将“哈希统计”模板化：  
  ```python
  for x in A:
      for y in B:
          count[x + y] = count.get(x + y, 0) + 1
  ```  
- 复习“排序 + 双指针 + 去重”的组合套路。  
- 尝试归纳三类哈希用法：  
  1. **存在性查找**（如 1, 349）  
  2. **计数统计**（如 242, 383, 454）  
  3. **组合去重**（如 15, 18）  

---

### 💬 一句话总结
哈希的真正威力在于——**将复杂的多层枚举，拆解成可缓存的中间结果**。  
当你能灵活切分问题维度，就能让原本 O(n⁴) 的暴力题，优雅地化为 O(n²) 的查表题。
